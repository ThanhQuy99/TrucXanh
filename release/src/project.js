window.__require=function t(i,s,e){function o(c,h){if(!s[c]){if(!i[c]){var a=c.split("/");if(a=a[a.length-1],!i[a]){var l="function"==typeof __require&&__require;if(!h&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}}var r=s[c]={exports:{}};i[c][0].call(r.exports,function(t){return o(i[c][1][t]||t)},r,r.exports,t,i,s,e)}return s[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<e.length;c++)o(e[c]);return o}({Game:[function(t,i,s){"use strict";cc._RF.push(i,"ffe9cnPap9OkbmNjcEe35Aj","Game"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,winGamePanel:cc.Node,loseGamePanel:cc.Node,tableGame:cc.Node,score:0,startButton:cc.Node},onLoad:function(){this.totalScore=this.score,this.tableGame.active=!1,this.node.on("UPDATE_SCORE",this.updateScore,this),this.node.on("GAME_WIN",this.winGame,this),this.node.on("GAME_RESTART",this.restart,this),this.hiddenWinGamePanel(),this.showScore()},playGame:function(){this.startButton.active=!1,this.setNewGame()},updateScore:function(t){var i=this;this.isUpdateScore=!0;var s=t.getUserData().isCorrect;this.newScore=s?this.totalScore+10:this.totalScore-10,cc.tween(this).to(1,{totalScore:this.newScore},{easing:"sineInOut"}).call(function(){i.isUpdateScore=!1}).start(),this.checkLose(),t.stopPropagation()},winGame:function(t){t.stopPropagation(),this.showWinGamePanel(),this.node.soundControl&&this.node.soundControl.playMusicAudio()},showWinGamePanel:function(){this.tableGame.active=!1,this.winGamePanel.active=!0},hiddenWinGamePanel:function(){this.winGamePanel.active=!1},hiddenLoseGamePanel:function(){this.loseGamePanel.active=!1},setNewGame:function(){this.node.soundControl&&this.node.soundControl.stopMusicAudio(),this.totalScore=this.score,this.tableGame.active=!0,this.hiddenWinGamePanel(),this.hiddenLoseGamePanel(),this.tableGame.emit("RESET_TABLE"),this.showScore(),this.node.soundControl&&this.node.soundControl.playMusicAudio()},restart:function(t){t.stopPropagation(),this.totalScore=this.score,this.tableGame.active=!0,this.setNewGame()},showScore:function(){this.scoreLabel.string="Score: "+Math.round(this.totalScore)},checkLose:function(){0==this.newScore&&(this.tableGame.active=!1,this.loseGamePanel.active=!0,this.node.soundControl&&this.node.soundControl.playMusicAudio())},update:function(){this.isUpdateScore&&this.showScore()}}),cc._RF.pop()},{}],SoundControl:[function(t,i,s){"use strict";cc._RF.push(i,"5a92b7g85dHyqz0g1Sm0jBA","SoundControl"),cc.Class({extends:cc.Component,properties:{breakAudio:{default:null,type:cc.AudioClip},deathAudio:{default:null,type:cc.AudioClip},musicAudio:{default:null,type:cc.AudioClip},shotAudio:{default:null,type:cc.AudioClip},spawnAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.node.soundControl=this,this.node.on("PLAY_BREAK_AUDIO",this.playBreakAudio,this),this.node.on("PLAY_DEATH_AUDIO",this.playDeathAudio,this),this.node.on("PLAY_MUSIC_AUDIO",this.playMusicAudio,this),this.node.on("PLAY_SHOT_AUDIO",this.playShotAudio,this),this.node.on("PLAY_SPAWN_AUDIO",this.playSpawnAudio,this),this.node.on("STOP_MUSIC_AUDIO",this.stopMusicAudio,this)},playBreakAudio:function(t){t.stopPropagation(),cc.audioEngine.play(this.breakAudio,!1,1)},playDeathAudio:function(t){t.stopPropagation(),cc.audioEngine.play(this.deathAudio,!1,1)},playMusicAudio:function(){this.curentMusic=cc.audioEngine.play(this.musicAudio,!1,1)},playShotAudio:function(t){t.stopPropagation(),cc.audioEngine.play(this.shotAudio,!1,1)},playSpawnAudio:function(t){t.stopPropagation(),cc.audioEngine.play(this.spawnAudio,!1,1)},stopMusicAudio:function(){cc.audioEngine.stop(this.curentMusic)}}),cc._RF.pop()},{}],Symbol:[function(t,i,s){"use strict";cc._RF.push(i,"bb9ef5r4lRFqJcW+ymuvU9X","Symbol"),cc.Class({extends:cc.Component,properties:{staticSymbol:cc.Node,label:cc.Label,cover:cc.Node,symbols:{default:[],type:cc.SpriteFrame}},onLoad:function(){this.index=0,this.node.on("SET_ID",this.changeToSymbol,this),this.node.on("SET_INDEX",this.setIndex,this),this.node.on("RESET_SYMBOL",this.resetSymbol,this),this.node.on("HIDDEN_SYMBOL",this.hiddenSymbol,this),this.node.on("DISABLED_SYMBOL",this.disabledSymbol,this),this.node.on("ENABLED_SYMBOL",this.enabledSymbol,this),this.node.on("HIDDEN_COVER",this.flipShow,this),this.node.on("RESET_COVER",this.flipHide,this),this.node.on("SHOW_COVER",this.showCover,this)},onClick:function(t,i){this.clickItemEvent=new cc.Event.EventCustom("SYMBOL_HAS_CLICK",!0),this.clickItemEvent.setUserData({id:this.symbolID,index:this.index}),this.node.dispatchEvent(this.clickItemEvent)},flipShow:function(){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.2,0,1),cc.callFunc(function(){t.cover.active=!1}),cc.scaleTo(.2,1,1)))},flipHide:function(){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.2,0,1),cc.callFunc(function(){t.cover.active=!0}),cc.scaleTo(.2,1,1)))},showCover:function(){this.cover.active=!0},hiddenSymbol:function(){this.node.opacity=0},disabledSymbol:function(){this.node.active=!1},enabledSymbol:function(){this.node.active=!0},getSymbolID:function(){return this.symbolID},setIndex:function(t){this.label.string=t,this.index=t},resetSymbol:function(t){var i=.1*t;this.node.runAction(cc.sequence(cc.delayTime(i),cc.fadeIn(.1)))},changeToSymbol:function(t){var i=this.symbols[t];this.symbolID=t,this.staticSymbol.getComponent(cc.Sprite).spriteFrame=i}}),cc._RF.pop()},{}],Table:[function(t,i,s){"use strict";cc._RF.push(i,"de752dfnPhBBKD/x/FNIDFt","Table"),cc.Class({extends:cc.Component,properties:{table:cc.Node,symbolPrefab:cc.Prefab,spawnCount:0,widthStep:100,heightStep:100,delayTime:0,numberOfCol:0,numberOfRow:0},onLoad:function(){this.startX=-(this.numberOfCol/2-.5)*this.widthStep,this.startY=(this.numberOfRow/2-.5)*this.heightStep,this.node.on("SYMBOL_HAS_CLICK",this.symbolClick,this),this.node.on("RESET_TABLE",this.resetTable,this),this.loadTable()},loadTable:function(){this.isFirstClick=!1,this.matrix=[],this.symbols=[],this.initSymbols()},initSymbols:function(){for(var t=this.spawnCount-1;t>=0;t--){var i=cc.instantiate(this.symbolPrefab);this.symbols.unshift(i),this.table.addChild(i),i.emit("SET_INDEX",t+1),i.emit("SET_ID",this.matrix[t]),i.emit("HIDDEN_SYMBOL")}this.symbolsWins=this.symbols.slice(),this.isCanClick=!1},resetTable:function(){this.symbolsWins=this.symbols.slice(),this.shuffleMatrix(),this.hiddenListSymbols(),this.isCanClick=!1;for(var t=0;t<this.spawnCount;++t){var i=this.symbols[t];i.emit("SET_ID",this.matrix[t]),i.setPosition(0,0),i.emit("SHOW_COVER")}this.showSymbols()},showSymbols:function(){for(var t=this,i=this.spawnCount-1;i>=0;i--){var s=this.symbols[i];s.emit("ENABLED_SYMBOL"),s.emit("RESET_SYMBOL",this.spawnCount-i)}this.scheduleOnce(function(){t.moveListSymbol()},.1*this.symbols.length)},moveListSymbol:function(){for(var t=this,i=function(i){var s=t.symbols[i],e=t._getPosByIndex(i);s.runAction(cc.sequence(cc.delayTime(.1*i),cc.moveTo(.3,e).easing(cc.easeBackOut()),cc.callFunc(function(){i===t.symbols.length-1&&(t.isCanClick=!0)})))},s=0;s<this.symbols.length;s++)i(s)},_getPosByIndex:function(t){var i=t%this.numberOfCol,s=Math.floor(t/this.numberOfCol),e=this.startX+i*this.widthStep,o=this.startY-s*this.heightStep;return cc.v2(e,o)},hiddenListSymbols:function(){for(var t=0;t<this.symbols.length;t++)this.symbols[t].emit("HIDDEN_SYMBOL")},shuffleMatrix:function(){for(var t=0;t<this.spawnCount;t++)t<this.spawnCount/2?this.matrix[t]=t+1:this.matrix[t]=t-9;this.shuffle(this.matrix)},shuffle:function(t){for(var i=t.length-1;i>0;i--){var s=Math.floor(Math.random()*(i+1)),e=t[i];t[i]=t[s],t[s]=e}},symbolClick:function(t){var i=this;t.stopPropagation();var s=t.getUserData();if(this.isCanClick){this.node.dispatchEvent(new cc.Event.EventCustom("PLAY_SHOT_AUDIO",!0));var e=s.id,o=s.index;this.isFirstClick?this.symbolFirstIndex!=o?(this.isCanClick=!1,this.symbols[o-1].emit("HIDDEN_COVER"),this._callback=function(){i.compare(e,o)},this.scheduleOnce(this._callback,this.delayTime),this.isFirstClick=!1):this.isFirstClick=!0:(this.symbols[o-1].emit("HIDDEN_COVER"),this.symbolFirstID=e,this.symbolFirstIndex=o,this.isFirstClick=!0)}},compare:function(t,i){t==this.symbolFirstID?(this.symbols[i-1].emit("DISABLED_SYMBOL"),this.symbols[this.symbolFirstIndex-1].emit("DISABLED_SYMBOL"),this.sentScore(!0),this.removeSymbol(this.symbols[i-1].name),this.removeSymbol(this.symbols[this.symbolFirstIndex-1].name),this.checkWin(),this.node.dispatchEvent(new cc.Event.EventCustom("PLAY_BREAK_AUDIO",!0))):(this.symbols[i-1].emit("RESET_COVER"),this.symbols[this.symbolFirstIndex-1].emit("RESET_COVER"),this.sentScore(!1),this.node.dispatchEvent(new cc.Event.EventCustom("PLAY_DEATH_AUDIO",!0))),this.isCanClick=!0},sentScore:function(t){this.sentScoreEvent=new cc.Event.EventCustom("UPDATE_SCORE",!0),this.sentScoreEvent.setUserData({isCorrect:t}),this.node.dispatchEvent(this.sentScoreEvent)},removeSymbol:function(t){var i=this.symbolsWins.indexOf(t);this.symbolsWins.splice(i,1)},checkWin:function(){0==this.symbolsWins.length&&this.node.dispatchEvent(new cc.Event.EventCustom("GAME_WIN",!0))}}),cc._RF.pop()},{}],WinGame:[function(t,i,s){"use strict";cc._RF.push(i,"fffc3StzP5CqqurqKoIbCr1","WinGame"),cc.Class({extends:cc.Component,properties:{buttonPlay:cc.Node},onLoad:function(){},onClick:function(){this.node.dispatchEvent(new cc.Event.EventCustom("GAME_RESTART",!0))}}),cc._RF.pop()},{}]},{},["Game","SoundControl","Symbol","Table","WinGame"]);